<link href="disclaimer.css" rel="stylesheet"
    tal:attributes="href string:${view/site_url}/++resource++collective.disclaimer/disclaimer.css">

<div id="viewlet-disclaimer" role="alert" style="display: none"
    tal:attributes="data-enabled view/enabled;
                    data-last-modified view/last_modified">
  <a class="disclaimer-close" title="Close">X</a>
  <div class="disclaimer-title" tal:content="view/title">Title</div>
  <div tal:replace="structure view/text">
    Disclaimer
  </div>
</div>

<script>
if (Storage !== undefined) {
  $(document).ready(function () {
    "use strict";
    var last_modified = $("#viewlet-disclaimer").attr("data-last-modified");
    var last_seen = localStorage.getItem("collective.disclaimer");

    if (last_seen === null || last_seen < last_modified) {
      localStorage.setItem("collective.disclaimer", last_modified);
      var enabled = $("#viewlet-disclaimer").attr("data-enabled");

      if (enabled === "true") {
        $("#viewlet-disclaimer").show();
      }

      $(".disclaimer-close").click(function (event) {
        event.preventDefault();
        $("#viewlet-disclaimer").hide();
      });
    }
  });
}
</script>
